

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Processes &mdash; Linux shell tutorial  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/mystnb.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_lesson.css" type="text/css" />
  <link rel="stylesheet" href="_static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/togglebutton.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/minipres.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Files and directories" href="files_and_directories.html" />
    <link rel="prev" title="Starting out" href="starting_commands.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Linux shell tutorial
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">PART #1. Linux shell basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="the_shell.html">Basic shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="starting_commands.html">Starting out</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-a-unix-process">What’s a UNIX process?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-processes">Working with processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#foreground-and-background-processes">Foreground and background processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exit-the-shell-and-screen-utility">Exit the shell and ‘screen’ utility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="files_and_directories.html">Files and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="find.html">Find</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_archive_transfer.html">File archiving and transferring</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotkeys.html">How to make things faster: hotkeys</a></li>
<li class="toctree-l1"><a class="reference internal" href="files_continue.html">File tools and command line utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="input_output.html">Input and output</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines_grep.html">Pipelines and grep</a></li>
</ul>
<p class="caption"><span class="caption-text">PART #2. Linux shell scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quoting_substitution_aliases.html">Quoting, substitutions, aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables_functions_environments.html">Variables, functions, environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditionals.html">Conditionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="loops.html">Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="arrays_inputs_here_documents.html">Arrays, input, Here Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="traps_debugging_profiling.html">Traps, debugging, profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel_crontab_perlawksed.html">Parallel, crontab, perl/awk/sed</a></li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About us</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="to_continue.html">To continue: course development ideas/topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="bonus_material.html">Bonus material</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Linux shell tutorial</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Processes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/coderefinery/content/blob/main/content/processes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="processes">
<h1>Processes<a class="headerlink" href="#processes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-a-unix-process">
<h2>What’s a UNIX process?<a class="headerlink" href="#what-s-a-unix-process" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>To understand a shell, let’s first understand what processes are.</p></li>
<li><p>All programs are a process: process is a program in action.</p></li>
<li><p>Processes have:</p>
<ul>
<li><p>Process ID (integer)</p></li>
<li><p>Name (command being run)</p></li>
<li><p>Command line arguments</p></li>
<li><p>input and output: <code class="docutils literal notranslate"><span class="pre">stdin</span></code> (input, like from keyboard),
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> (output, like to screen), <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (like stdout)</p></li>
<li><p>Return code (integer) when complete</p></li>
<li><p>Working directory</p></li>
<li><p>environment variables: key-values which get inherited across processes.</p></li>
</ul>
</li>
<li><p>These concepts bind together <em>all</em> UNIX programs, even graphical ones.</p></li>
</ul>
<p>Process listing commands (feel free to try, but we play more with them later):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>top              # (q to quit)
htop             # (q to quit)
pstree
pstree $USER
pstree -pau $USER
ps auxw
</pre></div>
</div>
<p>You can find info about your user (try them right away):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id
echo $SHELL
</pre></div>
</div>
<p>Is your default shell is a <code class="docutils literal notranslate"><span class="pre">/bin/bash</span></code>? Login to kosh/taltta and run <code class="docutils literal notranslate"><span class="pre">chsh</span> <span class="pre">-s</span> <span class="pre">/bin/bash</span></code></p>
<p>Another way to find out what SHELL you are running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ps -p $$
</pre></div>
</div>
<p>Where am I: <code class="docutils literal notranslate"><span class="pre">pwd</span></code> (this shows the first piece of process
information: current directory)</p>
</div>
<div class="section" id="working-with-processes">
<h2>Working with processes<a class="headerlink" href="#working-with-processes" title="Permalink to this headline">¶</a></h2>
<p>All processes are related, a command executed in shell is a child process of
the shell. When child process is terminated it is reported back to parent process.
When you log out all shell child processes terminated along with the
shell.  You can see the whole family tree with <code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">af</span></code>.
One can kill a process or make it “nicer”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgrep</span> <span class="o">-</span><span class="n">af</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">kill</span> <span class="o">&lt;</span><span class="n">PID</span><span class="o">&gt;</span>
<span class="n">pkill</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">renice</span> <span class="c1">#priority &lt;PID&gt;</span>
</pre></div>
</div>
<p>Making process “nicer”, <code class="docutils literal notranslate"><span class="pre">renice</span> <span class="pre">19</span> <span class="pre">&lt;PID&gt;</span></code>, means it will run only when nothing
else in the system wants to.
User can increase nice value from 0 (the base priority) up to 19. It is
useful when you backup your data in background or alike.</p>
</div>
<div class="section" id="foreground-and-background-processes">
<h2>Foreground and background processes<a class="headerlink" href="#foreground-and-background-processes" title="Permalink to this headline">¶</a></h2>
<p>The shell has a concept of foreground and background processes: a
foreground process is directly connected to your screen and
keyboard. A background process doesn’t have input connected.  There
can only be one foreground at a time (obviously).</p>
<p>If you add <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> right after the command will send the process to
background. Example: <code class="docutils literal notranslate"><span class="pre">firefox</span> <span class="pre">--no-remote</span> <span class="pre">&amp;</span></code>, and same can be done with
any terminal command/function, like <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">pstree</span> <span class="pre">&amp;</span></code>.  In the big
picture, the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> serves the same role as <code class="docutils literal notranslate"><span class="pre">;</span></code> to separate commands,
but backgrounds the first and goes straight to the next.</p>
<p>If you have already running process, you can background with Ctrl-z and then
<code class="docutils literal notranslate"><span class="pre">bg</span></code>. Drawback: there is no easy way to redirect the running task
output, so if it generates output it covers your screen.</p>
<p>List the jobs running in the background with <code class="docutils literal notranslate"><span class="pre">jobs</span></code>, get a job back
online with  <code class="docutils literal notranslate"><span class="pre">fg</span></code> or <code class="docutils literal notranslate"><span class="pre">fg</span> <span class="pre">&lt;job_number&gt;</span></code>. There can be multiple
background jobs.</p>
<p>Kill a foreground job: Ctrl-c</p>
<p><strong>Hint:</strong> For running X Window apps while you logged in from other
Linux / MacOS make sure you use <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-X</span> <span class="pre">...</span></code> to log in. For Windows users,
you need to install Xming <a href="#id3"><span class="problematic" id="id1">[#xming]_</span></a> on your workstation.</p>
<p><strong>Hint:</strong> For immediate job-state change notifications, use <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">notify</span></code>. To automatically
stop background processes if they try writing to the screen <code class="docutils literal notranslate"><span class="pre">stty</span> <span class="pre">tostop</span></code></p>
</div>
<div class="section" id="exit-the-shell-and-screen-utility">
<h2>Exit the shell and ‘screen’ utility<a class="headerlink" href="#exit-the-shell-and-screen-utility" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">logout</span></code> or Ctrl-d (if you don’t want Ctrl-d to quit, set <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">IGNOREEOF=1</span></code> in <em>.bashrc</em>).</p>
<p>Of course, quitting your shell is annoying, since you have to start
over.  Luckily there are programs so that you don’t have to do this.
In order to keep your sessions running while you logged out, you
should learn about the <code class="docutils literal notranslate"><span class="pre">screen</span></code> program.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span></code> to start a session</p></li>
<li><p><em>Ctrl-a d</em> to detach the session while you are connected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-ls</span></code> to list currently running sessions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-rx</span> <span class="pre">&lt;session_id&gt;</span></code> to attach the session, one can use TAB for the autocompletion or skip the &lt;session_id&gt; if there is only one session running</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tmux</span></code> is a newer program with the same style.  It has some extra
features and some missing features still.</p></li>
</ul>
</div></blockquote>
<p>Some people have their <code class="docutils literal notranslate"><span class="pre">screen</span></code> open forever, which just keeps
running and never gets closed.  Wherever they are, they ssh in,
connect, and resume right where they left off.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">irssi</span></code> on kosh / lyta</p>
<p>[Lecture notes: that should be a first half, then joint hands-on/break ~30 mins]</p>
<dl class="field-list simple">
<dt class="field-odd">Exercise 1.1.1</dt>
<dd class="field-odd"><ul class="simple">
<li><p>for Aalto users: set your SHELL to BASH if you have not yet done so: <code class="docutils literal notranslate"><span class="pre">chsh</span> <span class="pre">-s</span> <span class="pre">/bin/bash</span></code> on kosh</p></li>
<li><p>find out with <em>man</em> how to use <em>top</em> / <em>pstree</em> / <em>ps</em> to list all the running processes that belong to you
Tip: <em>top</em> has both command line options and hot keys.</p>
<ul>
<li><p>(*) see <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">ps</span></code> and find out how to list a processes tree with ps, both
all processes and only your own (but all your processes, associated with all terminals)</p></li>
</ul>
</li>
<li><p>with pgrep list all bash and then zsh sessions on kosh or triton</p></li>
<li><p>log in to triton/kosh and run <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">ps</span></code>, send it to background, and <code class="docutils literal notranslate"><span class="pre">logout</span></code>, then
log in again. Is it still there? Play with the <code class="docutils literal notranslate"><span class="pre">screen</span></code>, run a session , then detach it
and log out, then log in back and get your original screen session back.</p></li>
<li><p>run <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">htop</span></code>, send it to backround, and then kill it with <code class="docutils literal notranslate"><span class="pre">kill</span></code>. Tip: one can
do it by background job number or by PID.</p></li>
<li><p>Imagine a use case: your current ssh session got stuck and does not response. Open another
ssh session to the same remote host and kill the first one. Tip: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$$</span></code> gives you current
bash PID.</p>
<ul>
<li><p>(*) get any X Window application (firefox, xterm, etc) to run on Triton / kosh</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="files_and_directories.html" class="btn btn-neutral float-right" title="Files and directories" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="starting_commands.html" class="btn btn-neutral float-left" title="Starting out" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Aalto Science-IT.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>