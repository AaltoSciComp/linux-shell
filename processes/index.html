

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Processes &mdash; Linux shell tutorial  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script data-domain="aaltoscicomp.github.io" defer="defer" src="https://plausible.cs.aalto.fi/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about/" />
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Files and directories" href="../files-and-directories/" />
    <link rel="prev" title="Starting out" href="../starting-commands/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Linux shell tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">PART #1. Linux shell basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../the-shell/">Basic shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starting-commands/">Starting out</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-a-unix-process">What’s a UNIX process?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-processes">Working with processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#foreground-and-background-processes">Foreground and background processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exit-the-shell-and-screen-utility">Exit the shell and ‘screen’ utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises-1-1">Exercises 1.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../files-and-directories/">Files and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../find/">Find</a></li>
<li class="toctree-l1"><a class="reference internal" href="../file-archive-transfer/">File archiving and transferring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli_utiltities/">Command line utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pipelines-grep/">Evaluations, separators and grep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../init_files/">Initialization files and file editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hotkeys/">How to make things faster: hotkeys</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">PART #2. Linux shell scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quoting-substitution-aliases/">Quoting, substitutions, aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../variables-functions-environments/">Variables, functions, environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conditionals/">Conditionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loops/">Loops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arrays-inputs-here-documents/">Arrays, input, Here Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../traps-debugging-profiling/">Traps, debugging, profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel-crontab-perlawksed/">Parallel, crontab, perl/awk/sed</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contact/">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/">About us</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../to-continue/">To continue: course development ideas/topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bonus-material/">Bonus material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Linux shell tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Processes</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/content/blob/main/content/processes.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="processes">
<h1>Processes<a class="headerlink" href="#processes" title="Link to this heading"></a></h1>
<section id="what-s-a-unix-process">
<h2>What’s a UNIX process?<a class="headerlink" href="#what-s-a-unix-process" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>To understand a shell, let’s first understand what processes are.</p></li>
<li><p>All programs are a process: process is a program in action.</p></li>
<li><p>Processes have:</p>
<ul>
<li><p>Process ID or PID (integer)</p></li>
<li><p>Name (command being run)</p></li>
<li><p>Command line arguments/options</p></li>
<li><p>input and output: <code class="docutils literal notranslate"><span class="pre">stdin</span></code> (input, like from keyboard, another program, another device),
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> (output, like to screen, another program, file, device), <code class="docutils literal notranslate"><span class="pre">stderr</span></code> (like stdout but for errors)</p></li>
<li><p>Return code (integer) when complete</p></li>
<li><p>Working directory</p></li>
<li><p>environment variables: key-values which get inherited across processes.</p></li>
</ul>
</li>
<li><p>These concepts bind together <em>all</em> UNIX programs, even graphical ones.</p></li>
</ul>
<p>Process listing commands (feel free to try, but we play more with them later):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ps auxw
top              # (q to quit)
htop             # (q to quit)
pstree
pstree $USER
pstree -pau $USER
</pre></div>
</div>
<p>Another way to find out what SHELL you are running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ps -p $$
</pre></div>
</div>
</section>
<section id="working-with-processes">
<h2>Working with processes<a class="headerlink" href="#working-with-processes" title="Link to this heading"></a></h2>
<p>All processes are related, a command executed in shell is a child process of
the shell. When child process is terminated it is reported back to parent process.
When you log out all shell child processes terminated along with the
shell.  You can see the whole family tree with <code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">af</span></code>.
One can kill a process or make it “nicer”.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgrep</span> <span class="o">-</span><span class="n">af</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">kill</span> <span class="o">&lt;</span><span class="n">PID</span><span class="o">&gt;</span>
<span class="n">pkill</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">renice</span> <span class="c1">#priority &lt;PID&gt;</span>
</pre></div>
</div>
<p>Making process “nicer”, <code class="docutils literal notranslate"><span class="pre">renice</span> <span class="pre">19</span> <span class="pre">&lt;PID&gt;</span></code>, means it will run only when nothing
else in the system wants to.
User can increase nice value from 0 (the base priority) up to 19. It is
useful when you backup your data in background or alike.</p>
</section>
<section id="foreground-and-background-processes">
<h2>Foreground and background processes<a class="headerlink" href="#foreground-and-background-processes" title="Link to this heading"></a></h2>
<p>The shell has a concept of foreground and background processes: a
foreground process is directly connected to your screen and
keyboard. A background process doesn’t have input connected.  There
can only be one foreground at a time (obviously).</p>
<p>If you add <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> right after the command will send the process to
background. Example: <code class="docutils literal notranslate"><span class="pre">firefox</span> <span class="pre">--no-remote</span> <span class="pre">&amp;</span></code>, and same can be done with
any terminal command/function, like <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">pstree</span> <span class="pre">&amp;</span></code>.  In the big
picture, the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> serves the same role as <code class="docutils literal notranslate"><span class="pre">;</span></code> to separate commands,
but backgrounds the first and goes straight to the next.</p>
<p>If you have already running process, you can background with Ctrl-z and then
<code class="docutils literal notranslate"><span class="pre">bg</span></code>. Drawback: there is no easy way to redirect the running task
output, so if it generates output it covers your screen.</p>
<p>List the jobs running in the background with <code class="docutils literal notranslate"><span class="pre">jobs</span> <span class="pre">-l</span></code> (show real PID as well),
get a job back online with  <code class="docutils literal notranslate"><span class="pre">fg</span></code> or <code class="docutils literal notranslate"><span class="pre">fg</span> <span class="pre">&lt;job_number&gt;</span></code>. There can be multiple
background jobs.</p>
<p>Kill a foreground job: Ctrl-c</p>
<p><strong>Hint:</strong> For running X Window apps while you logged in from other
Linux / MacOS make sure you use <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-X</span> <span class="pre">...</span></code> to log in. For Windows users,
you need to install VcXsrv Windows X Server <a class="footnote-reference brackets" href="#vcxsrv" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> on your workstation.</p>
<p><strong>Hint:</strong> For immediate job-state change notifications, use <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">notify</span></code>. To automatically
stop background processes if they try writing to the screen <code class="docutils literal notranslate"><span class="pre">stty</span> <span class="pre">tostop</span></code></p>
</section>
<section id="exit-the-shell-and-screen-utility">
<h2>Exit the shell and ‘screen’ utility<a class="headerlink" href="#exit-the-shell-and-screen-utility" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">logout</span></code> or Ctrl-d (if you don’t want Ctrl-d to quit, set <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">IGNOREEOF=1</span></code> in <em>.bashrc</em>).</p>
<p>Of course, quitting your shell is annoying, since you have to start
over.  Luckily there are programs so that you don’t have to do this.
In order to keep your sessions running while you logged out, you
should learn about the <code class="docutils literal notranslate"><span class="pre">screen</span></code> program.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span></code> to start a session</p></li>
<li><p><em>Ctrl-a d</em> to detach the session while you are connected</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-ls</span></code> to list currently running sessions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-rx</span> <span class="pre">&lt;session_id&gt;</span></code> to attach the session, one can use TAB for the autocompletion or skip the &lt;session_id&gt; if there is only one session running</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tmux</span></code> is a newer program with the same style.  It has some extra
features and some missing features still.</p></li>
</ul>
</div></blockquote>
<p>Some people have their <code class="docutils literal notranslate"><span class="pre">screen</span></code> open forever, which just keeps
running and never gets closed.  Wherever they are, they ssh in,
connect, and resume right where they left off.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">irssi</span></code> on kosh / lyta</p>
</section>
<section id="exercises-1-1">
<h2>Exercises 1.1<a class="headerlink" href="#exercises-1-1" title="Link to this heading"></a></h2>
<div class="admonition-exercise exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise</p>
<ul class="simple">
<li><p>Find out which shell you are running, your user name, hostname, system name. For Aalto users: set
your SHELL to BASH if you have not yet done so: <code class="docutils literal notranslate"><span class="pre">chsh</span> <span class="pre">-s</span> <span class="pre">/bin/bash</span></code> on kosh</p></li>
<li><p>Find out with <em>man</em> how to use <em>top</em> / <em>ps</em> to list all the running processes that belong to you
Tip: <em>top</em> has both command line options and hot keys.</p></li>
<li><p>Find your shell session’s PID, list the processes tree of all child processes that belong to
your current session, with the command line, PID, user</p></li>
<li><p>With pgrep list all bash processes, if you have SSH access, try both locally, and on a remote Linux server</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">filename</span></code>, send it to the background, and return back to the foreground``. Tip: quite <code class="docutils literal notranslate"><span class="pre">nano`</span> <span class="pre">with</span> <span class="pre">``Ctrl-x</span></code>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">htop</span></code>, send it to the backround, and then kill it with <code class="docutils literal notranslate"><span class="pre">kill</span></code>. Tip: one can
do it by background job number or by PID.</p></li>
<li><p>(*) Run <code class="docutils literal notranslate"><span class="pre">screen</span></code> session. Detach, close the seesion, open again and attach ‘screen’ back. Exit ‘screen’.</p></li>
<li><p>(*) Find out how to list a processes tree with <code class="docutils literal notranslate"><span class="pre">ps</span></code>, both
all processes and only your own (but all your processes, associated with all terminals)</p></li>
<li><p>(*) Try a use case: your current ssh session to a remote host “got stuck” and does not response. Open another
ssh session to the same remote host and kill the first one. Tip: <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$$</span></code> gives you current
bash PID.</p></li>
<li><p>(*) Get any X Window application (firefox, xterm, etc) to run on a remote Linux machine</p></li>
</ul>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="vcxsrv" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://sourceforge.net/projects/vcxsrv/">https://sourceforge.net/projects/vcxsrv/</a></p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../starting-commands/" class="btn btn-neutral float-left" title="Starting out" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../files-and-directories/" class="btn btn-neutral float-right" title="Files and directories" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Aalto Science-IT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>